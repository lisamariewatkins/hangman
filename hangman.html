<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link href="reset.css" type="text/css" rel="stylesheet">

	<link rel="stylesheet" type="text/css" href="hangman.css">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	<link href='https://fonts.googleapis.com/css?family=Shadows+Into+Light' rel='stylesheet' type='text/css'>
</head>
<body>

	<header>
		<img src="gotlogo.jpg">
		<br>
		<strong>Game of Thrones Hangman Game</strong>
	</header>
	<div class="row" id="quotebox">
		<div class = "col-md-12" id="quote"><em>When you play the game of thrones, you win or you die.</em></div>
	</div>
	<div class="row" id="gameContent">
		<div class = "col-md-3">
			<strong>The word is...</strong>
			<br><br>
			<p id="currentWord"></p>
		</div>
		<div class = "col-md-3">
			<strong>Lives left:</strong>
			<br><br>
			<p id="livesLeft"></p>
		</div>
		<div class = "col-md-3">
			<strong>Past guesses:</strong>
			<br><br>
			<p id="pastGuesses"></p>
		</div>
		<div class = "col-md-3">
			<Strong>Total wins:</Strong>
			<br><br>
			<p id="totalWins"></p>
		</div>
	</div>

	<script type="text/javascript">

	//set up global variables

	var wordBank = ["cersei", "tyrion", "winterfell", "needle"];
	
	var targetWord = wordBank[Math.floor(Math.random()*wordBank.length)];

	var totalGuesses = []; //creates empty array to track user guesses

	var lives = 10; 

	var arrWord = []; //creates empty array so user can begin to guess

	var wins = 0;

	//for loop to create empty dashes for word

	for(var i = 0; i < targetWord.length; i++ ){
	arrWord.push("_");
	}

	//reset function to call on later
		
	function reset(){
		targetWord = wordBank[Math.floor(Math.random()*wordBank.length)];
		arrWord = [];
		for(var i = 0; i < targetWord.length; i++ ){
		arrWord.push("_");
		}
		lives = 10;
		guesses = "";
		totalGuesses = [];
	}

	//check array function to call on later

	function checkArray(arr, letter, word){ 
		for (var i=0; i < arr.length; i++){
			if (letter == word[i]){
				arr.splice(i, 1, letter);
			}
		}
		console.log(arrWord);
	}

	//set up variables to show stats later

	var showCurrentWord = document.getElementById("currentWord");

	var showLives = document.getElementById("livesLeft");

	var showGuesses = document.getElementById("pastGuesses");

	var showWins = document.getElementById("totalWins");

	//set up display of lives/word BEFORE user starts playing

	showLives.innerHTML = lives;
	showCurrentWord.innerHTML = arrWord.join(" ")

	//now when user presses a key...

	document.onkeyup = function(event){

		var letter = String.fromCharCode(event.keyCode).toLowerCase();
			
		var pos = targetWord.indexOf(letter);

		//if index.Of returns -1, we know letter is not in word
		if (pos == -1){
			lives--;
			showLives.innerHTML = lives;
			totalGuesses.push(letter)
			showGuesses.innerHTML = totalGuesses.join(", ");
		}
		else{
			checkArray(arrWord, letter, targetWord);
			showCurrentWord.innerHTML = arrWord.join(" ")
		}

		if(arrWord.indexOf("_") === -1){
			alert("Congratulations! You've saved Winterfell!");
			wins++;
			showWins.innerHTML = wins;
			reset();
		}	
			
		if(lives == 0){
			alert("You've run out of lives - Winter is coming! Press any key to start over and try again!");
			reset();
			}
		}

	</script>


</body>
</html>